<h1 class="mat-h1">Movies</h1>
<div>
  <!-- <mat-icon color="primary" style="margin-left:30%" >{{gpsIcon}}</mat-icon>&nbsp;
  Location : 
  <input matInput #location [value]="loca" (change)="changeLocation(location.value)"> -->
  <!-- <button mat-flat-button color="primary" >Add Movie</button> -->
  <app-date-picker style="margin-left:20%;"></app-date-picker>
  <mat-form-field style="margin-left:10%" appearance="fill">
    <!-- <mat-icon color="primary"  >{{gpsIcon}}</mat-icon>&nbsp; -->

    <mat-label>Location</mat-label>
    <input matInput [value]="loca" placeholder="Location" #location name="location"
      (change)="changeLocation(location.value)">

  </mat-form-field>
  <mat-icon color="primary" style="margin-left: -30px;">{{gpsIcon}}</mat-icon>&nbsp;

  <!-- <button mat-flat-button color="primary" style="margin-left:10%" (click)="onClickAddMovie()">Add Movie</button> -->
  <p *ngIf="errLocation" style="color:red;margin-left: 44%;">Please enter location</p>
  <!-- <app-date-picker></app-date-picker> -->
  <!-- <form class="example-form">
    <mat-form-field class="example-full-width" appearance="fill">
      <mat-label>Number</mat-label>
      <input type="text"
      #location [value]="loca" (change)="changeLocation(location.value)"
             placeholder="Pick one"
             aria-label="Number"
             matInput
             [formControl]="myControl"
             [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let option of options" [value]="option" (change)="changeLocation(location.value)">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form> -->
</div>
<br />

<div style="padding: 10px;;">
<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

  <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->


  <!-- Icon Column -->
  <ng-container matColumnDef="icon">
    <th mat-header-cell *matHeaderCellDef>



    </th>
    <td mat-cell *matCellDef="let movie">
      <mat-icon (click)="deleteMovie(movie.name)">delete</mat-icon>&nbsp;&nbsp;&nbsp;&nbsp;
      <mat-icon (click)="onClickUpdateMovie(movie)">edit</mat-icon>
    </td>

  </ng-container>




  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Name
      <mat-icon style="color:grey" (click)="sort('name')">sort</mat-icon>

      <div *ngIf="filterOpen">
        <input #name value="" (change)="filter('name',name.value)" style="width:30%">
      </div>
    </th>
    <td mat-cell *matCellDef="let movie"> {{movie.name}}

    </td>
  </ng-container>

  <!-- Cast Column -->
  <ng-container matColumnDef="cast">
    <th mat-header-cell *matHeaderCellDef> Cast
      <!-- <mat-icon style="color:grey" (click)="sort('cast')">sort</mat-icon> -->

    </th>
    <td mat-cell *matCellDef="let movie"> {{movie.cast}} </td>
  </ng-container>

  <!-- Genre Column -->
  <ng-container matColumnDef="genre">
    <th mat-header-cell *matHeaderCellDef> Genre
      <mat-icon style="color:grey" (click)="sort('genre')">sort</mat-icon>

      <div *ngIf="filterOpen">
        <input #name value="" (change)="filter('genre',name.value)" style="width:30%">
      </div>
    </th>
    <td mat-cell *matCellDef="let movie"> {{movie.genre}} </td>
  </ng-container>

  <!-- Language Column -->
  <ng-container matColumnDef="lang">
    <th mat-header-cell *matHeaderCellDef> Language
      <mat-icon style="color:grey" (click)="sort('lang')">sort</mat-icon>

      <div *ngIf="filterOpen">
        <input #name value="" (change)="filter('lang',name.value)" style="width:30%">
      </div>

    </th>
    <td mat-cell *matCellDef="let movie"> {{movie.lang}}
    </td>

  </ng-container>

  <!-- Cast Column -->
  <ng-container matColumnDef="noOfLoc">
    <th mat-header-cell *matHeaderCellDef> Locations
    </th>
    <td mat-cell *matCellDef="let movie"> {{movie.noOfLoc}} </td>
  </ng-container>



  <!-- Button Column -->
  <ng-container matColumnDef="button">
    <th mat-header-cell *matHeaderCellDef>
      <mat-icon (click)="toggleFilter()">{{filterIcon}}</mat-icon>
      <mat-icon (click)="fetchAndFillMoviesData();" style="margin-left:20%;">update</mat-icon>
      <mat-icon (click)="onClickAddMovie();" style="margin-left:20%;">add</mat-icon>



    </th>
    <td mat-cell *matCellDef="let movie">
      <button mat-flat-button color='primary' (click)="viewDetails(movie.name)">View Details</button>
    </td>

  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
<!-- <mat-paginator #paginator [length]="dataSource?.length" [pageIndex]="0" [pageSize]="50"
[pageSizeOptions]="[10, 25, 50, 100, 250]">
</mat-paginator> -->
</div>
<!-- <button (click)="filter('name','dhoom')">filter</button>
  <button (click)="sort('genre')">sort</button>

  <button (click)="toggleFilter()">filter open</button> -->
<!-- <button (click)="openDialog()">dialog</button> -->